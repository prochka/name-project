<?php
 require '../class/mysql.php'; class mAddOperator extends Mysql{ protected function checkLogin($operator_login){ $sql = "SELECT * FROM ok_operators WHERE operator_login = '{$operator_login}'"; $mysql = self::getInstance(); $count = $mysql->query($sql); if($count->fetchColumn() > 0){ $this->admin_messages("Логин занят, используйте другой"); } } protected function addOperator($operator_name, $operator_surname, $operator_otdel, $operator_login, $operator_pass, $operator_mess, $operator_photo){ $ltime = time(); $sql = "INSERT INTO ok_operators VALUES(NULL, '{$operator_login}', '{$operator_pass}', '{$operator_name}', '{$operator_surname}', 99, NULL, '{$operator_photo}', {$operator_otdel}, NULL, 0, '{$operator_mess}', '{$ltime}')"; $mysql = self::getInstance(); $count = $mysql->exec($sql); if($count != 1){ return $mysql->errorInfo(); } else{ return true; } } } ?>
